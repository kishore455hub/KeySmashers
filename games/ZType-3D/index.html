<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id="game-container">
        <div id="title-screen" class="screen">
            <div id="title-canvas-container">
                <canvas id="title-canvas"></canvas>
            </div>
            <h1>ZType 3D</h1>
            <button id="start-button" class="glow-button">new game</button>
            <button id="settings-button" class="glow-button">settings</button>
            <button id="grade-info-title-button" class="glow-button">grade system</button>
            <button id="info-button" class="info-left-btn" aria-label="Info">
                <svg width="28" height="28" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="16" cy="16" r="14" stroke="#ffffff" stroke-width="2.2" fill="none"/>
                    <rect x="15" y="13" width="2" height="8" rx="1" fill="#ffffff"/>
                    <rect x="15" y="9" width="2" height="2" rx="1" fill="#ffffff"/>
                </svg>
            </button>
        </div>

        <div id="game-screen" class="screen hidden">
            <div id="game-canvas-container">
                <canvas id="game-canvas"></canvas>
            </div>
            <div id="bullet-layer"></div>
            <img id="cockpit-overlay" src="img/cockpit.png" alt="Cockpit Overlay" />
            <div id="game-ui">
                <svg class="gradient-arc" width="200" height="120" viewBox="0 0 200 120">
                    <defs>
                        <linearGradient id="arc-gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" stop-color="cyan" />
                            <stop offset="25%" stop-color="#00ffaa" />
                            <stop offset="50%" stop-color="#ffff00" />
                            <stop offset="75%" stop-color="#ff8800" />
                            <stop offset="100%" stop-color="red" />
                        </linearGradient>
                    </defs>
                    <path d="M 10,100 A 90,90 0 0,1 190,100" stroke="url(#arc-gradient)" stroke-width="2.5" fill="none" stroke-linecap="round" />
                    <text id="arc-wpm-display" x="10" y="100" fill="cyan" font-size="16" font-family="Orbitron" text-anchor="middle" font-weight="bold">0</text>
                    <text id="arc-streak-display" x="70" y="61" fill="cyan" font-size="18" font-family="Orbitron" text-anchor="middle" font-weight="bold">0</text>
                    <text id="arc-accuracy-display" x="130" y="61" fill="#00FF00" font-size="18" font-family="Orbitron" text-anchor="middle" font-weight="bold">0%</text>
                    <text id="arc-score-display" x="100" y="100" fill="cyan" font-size="25" font-family="Orbitron" text-anchor="middle" font-weight="bold">000000</text>
                </svg>
                <div id="typing-input-container">
                    <!-- Remove the word container and current word elements -->
                </div>
                <div id="stats-container" style="display: none;">
                    <div class="stat-box">
                        <div class="stat-label">ACCURACY</div>
                        <div id="accuracy" class="stat-value">0%</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">STREAK</div>
                        <div id="streak" class="stat-value">0</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">WPM</div>
                        <div id="wpm" class="stat-value">0</div>
                    </div>
                </div>
                <div id="lives-container" class="lives-container"></div>
                <div id="enter-ability-container" class="enter-ability-container"></div>
                <div id="enter-ability-prompt" class="enter-ability-prompt">Press Enter to destroy</div>
                <button id="pause-button" class="icon-button">||</button>
            </div>
        </div>

        <div id="game-over-screen" class="screen hidden">
            <h2>GAME OVER</h2>
            <div id="game-grade" class="grade-display">A+</div>
            <div class="stats-section">
                <div class="stat-row">
                    <div class="stat-label">SCORE</div>
                    <div id="final-score" class="stat-value">000000</div>
                </div>
                <div class="stat-row">
                    <div class="stat-label">YOU REACHED</div>
                    <div id="final-wave" class="stat-value">PHASE 001</div>
                </div>
                <div class="stat-row">
                    <div class="stat-label">ACCURACY</div>
                    <div id="final-accuracy" class="stat-value">0%</div>
                </div>
                <div class="stat-row">
                    <div class="stat-label">LONGEST STREAK</div>
                    <div id="final-streak" class="stat-value">0</div>
                </div>
                <div class="stat-row">
                    <div class="stat-label">TYPING SPEED</div>
                    <div id="final-wpm" class="stat-value">0 WPM</div>
                </div>
                <div class="stat-row">
                    <div class="stat-label">WORDS TYPED</div>
                    <div id="final-words-destroyed" class="stat-value">0</div>
                </div>
                <div class="stat-row">
                    <div class="stat-label">TIME SURVIVED</div>
                    <div id="final-playtime" class="stat-value">00:00</div>
                </div>
                <div class="stat-row grade-score-row">
                    <div class="stat-label">GRADE SCORE</div>
                    <div id="grade-score-value" class="stat-value">0.00</div>
                </div>
                <div id="missed-word-container" class="stat-row missed-word-row">
                    <div class="stat-label">MISSED WORD</div>
                    <div id="missed-word" class="stat-value missed-word-value">-</div>
                </div>
            </div>
            <div id="performance-message" class="performance-message">IMPRESSIVE TYPING SKILLS!</div>
            <div class="button-row">
                <button id="play-again" class="glow-button">play again</button>
                <button id="back-to-title" class="glow-button">back to title</button>
            </div>
            <div id="game-over-canvas-container">
                <canvas id="game-over-canvas"></canvas>
            </div>
        </div>

        <div id="pause-screen" class="screen hidden">
            <div class="pause-overlay"></div>
            <div class="pause-modal">
                <h2>GAME PAUSED</h2>
                <div class="settings-section">
                    <div class="setting-item">
                        <input type="range" id="pause-music-volume" min="0" max="100" step="5" value="75">
                        <label for="pause-music-volume">Music: <span id="pause-music-value">75%</span></label>
                    </div>
                    <div class="setting-item">
                        <input type="range" id="pause-sound-volume" min="0" max="100" step="5" value="75">
                        <label for="pause-sound-volume">Sound Effects: <span id="pause-volume-value">75%</span></label>
                    </div>
                    <div class="setting-item">
                        <input type="checkbox" id="pause-show-bottom-center-word" class="setting-checkbox" checked>
                        <label for="pause-show-bottom-center-word">Active Word Display</label>
                    </div>
                    <div class="setting-item">
                        <input type="checkbox" id="pause-show-foremost-triangle" class="setting-checkbox" checked>
                        <label for="pause-show-foremost-triangle">Foremost Word Indicator</label>
                    </div>
                </div>
                <div class="button-row">
                    <button id="resume-button" class="glow-button">resume game</button>
                    <button id="pause-back-to-title" class="glow-button">back to title</button>
                </div>
            </div>
        </div>

        <div id="settings-screen" class="screen hidden">
            <h2>SETTINGS</h2>
            <div class="settings-section">
                <div class="setting-item">
                    <input type="range" id="music-volume" min="0" max="100" step="5" value="75">
                    <label for="music-volume">Music: <span id="music-value">75%</span></label>
                </div>
                <div class="setting-item">
                    <input type="range" id="sound-volume" min="0" max="100" step="5" value="75">
                    <label for="sound-volume">Sound Effects: <span id="volume-value">75%</span></label>
                </div>
                <div class="setting-item">
                    <input type="checkbox" id="show-bottom-center-word" class="setting-checkbox" checked>
                    <label for="show-bottom-center-word">Active Word Display</label>
                </div>
                <div class="setting-item">
                    <input type="checkbox" id="show-foremost-triangle" class="setting-checkbox" checked>
                    <label for="show-foremost-triangle">Foremost Word Indicator</label>
                </div>
            </div>
            <div class="button-row">
                <button id="settings-back" class="glow-button">back</button>
            </div>
        </div>

        <div id="grade-info-screen" class="screen hidden">
            <h2>GRADE SYSTEM</h2>
            <div class="grade-content-container">
                <div class="grade-info-section">
                    <div class="grade-info-row header">
                        <div class="grade-column">GRADE</div>
                        <div class="grade-column">GRADE SCORE RANGE</div>
                        <div class="grade-column">MESSAGE</div>
                    </div>
                    <div class="grade-info-row">
                        <div class="grade-column grade-s-plus">S+</div>
                        <div class="grade-column">95-100</div>
                        <div class="grade-column">LEGENDARY TYPIST!</div>
                    </div>
                    <div class="grade-info-row">
                        <div class="grade-column grade-s">S</div>
                        <div class="grade-column">90-94</div>
                        <div class="grade-column">MASTER OF THE KEYBOARD!</div>
                    </div>
                    <div class="grade-info-row">
                        <div class="grade-column grade-a-plus">A+</div>
                        <div class="grade-column">85-89</div>
                        <div class="grade-column">IMPRESSIVE TYPING SKILLS!</div>
                    </div>
                    <div class="grade-info-row">
                        <div class="grade-column grade-a">A</div>
                        <div class="grade-column">80-84</div>
                        <div class="grade-column">EXCELLENT PERFORMANCE!</div>
                    </div>
                    <div class="grade-info-row">
                        <div class="grade-column grade-b-plus">B+</div>
                        <div class="grade-column">75-79</div>
                        <div class="grade-column">GREAT JOB!</div>
                    </div>
                    <div class="grade-info-row">
                        <div class="grade-column grade-b">B</div>
                        <div class="grade-column">70-74</div>
                        <div class="grade-column">WELL DONE!</div>
                    </div>
                    <div class="grade-info-row">
                        <div class="grade-column grade-c-plus">C+</div>
                        <div class="grade-column">65-69</div>
                        <div class="grade-column">GOOD EFFORT!</div>
                    </div>
                    <div class="grade-info-row">
                        <div class="grade-column grade-c">C</div>
                        <div class="grade-column">60-64</div>
                        <div class="grade-column">KEEP PRACTICING!</div>
                    </div>
                    <div class="grade-info-row">
                        <div class="grade-column grade-d-plus">D+</div>
                        <div class="grade-column">55-59</div>
                        <div class="grade-column">YOU CAN DO BETTER!</div>
                    </div>
                    <div class="grade-info-row">
                        <div class="grade-column grade-d">D</div>
                        <div class="grade-column">50-54</div>
                        <div class="grade-column">NEEDS IMPROVEMENT!</div>
                    </div>
                    <div class="grade-info-row">
                        <div class="grade-column grade-f">F</div>
                        <div class="grade-column">0-49</div>
                        <div class="grade-column">TRY AGAIN!</div>
                    </div>
                </div>

                <div class="grade-calculation-info">
                    <h3>HOW GRADES ARE CALCULATED</h3>
                    <div class="grade-factor-row">
                        <div class="grade-factor">WPM</div>
                        <div class="grade-factor-weight">40%</div>
                        <div class="grade-factor-desc">Based on typing speed (words per minute)</div>
                    </div>
                    <div class="grade-factor-row">
                        <div class="grade-factor">ACCURACY</div>
                        <div class="grade-factor-weight">40%</div>
                        <div class="grade-factor-desc">Based on typing accuracy percentage</div>
                    </div>
                    <div class="grade-factor-row">
                        <div class="grade-factor">SCORE</div>
                        <div class="grade-factor-weight">10%</div>
                        <div class="grade-factor-desc">Based on total score (characters typed)</div>
                    </div>
                    <div class="grade-factor-row">
                        <div class="grade-factor">PHASE</div>
                        <div class="grade-factor-weight">10%</div>
                        <div class="grade-factor-desc">Based on highest phase reached</div>
                    </div>
                </div>
            </div>

            <div class="grade-info-button-container">
                <button id="grade-info-back" class="glow-button">back</button>
            </div>
        </div>

        <div id="word-spaceship">
            <div class="spaceship"></div>
            <div id="typing-input-container">
            </div>
        </div>

        <div id="debug-stats-container" style="display: none; position: fixed; left: 0; top: 50%; transform: translateY(-50%); z-index: 2000; background: rgba(20,20,20,0.92); color: #fff; font-family: monospace, Arial, sans-serif; font-size: 0.92rem; padding: 10px 14px; border-radius: 0 10px 10px 0; box-shadow: 2px 2px 12px rgba(0,0,0,0.18); text-align: left; min-width: 150px; max-width: 220px; line-height: 1.35;">
            <div style="margin-bottom: 6px; font-size: 1.01rem; font-weight: bold; letter-spacing: 0.5px;">DEBUG STATS</div>
            <div id="debug-fps">FPS: <span>0</span></div>
            <div id="debug-wpm-timer">WPM Timer: <span>0:00</span></div>
            <div id="debug-gameplay-timer">Game Timer: <span>0:00</span></div>
            <div id="debug-mini-fragments">Mini Fragments: <span>0</span></div>
            <div id="debug-input-buffer">Input Buffer: <span></span></div>
            <div id="debug-phase-info">Phase: <span>1</span> | Pending: <span>0</span></div>
            <div id="debug-threejs-objects">3D Objects: <span>0</span></div>
            <!-- AUTOBOT CONTROLS -->
            <div id="autobot-controls" style="margin: 10px 0 0 0; padding: 6px 0; border-top: 1px solid #333;">
                <label style="display: flex; align-items: center; gap: 6px; font-size: 0.95em;">
                    <input type="checkbox" id="autobot-toggle" style="margin-right: 4px;">Autobot
                </label>
                <label for="autobot-speed" style="font-size: 0.95em; margin-top: 4px; display: block;">Speed:
                    <select id="autobot-speed" style="margin-left: 4px;">
                        <option value="20">20 WPM</option>
                        <option value="50">50 WPM</option>
                        <option value="100">100 WPM</option>
                        <option value="150">150 WPM</option>
                        <option value="200">200 WPM</option>
                        <option value="250">250 WPM</option>
                        <option value="300">300 WPM</option>
                        <option value="350">350 WPM</option>
                    </select>
                </label>
            </div>
            <div style="margin-top: 7px; display: flex; gap: 6px;">
                <button id="debug-next-phase-btn" style="font-size:0.85em; padding:2px 7px; border-radius:4px; border:none; background:#1a4; color:#fff; cursor:pointer;">Next Phase</button>
                <button id="debug-clear-screen-btn" style="font-size:0.85em; padding:2px 7px; border-radius:4px; border:none; background:#a41; color:#fff; cursor:pointer;">Clear Screen</button>
            </div>
        </div>

        <div id="info-screen" class="screen hidden">
            <div style="position: relative; display: inline-block;">
                <img src="img/infobanner.png" alt="Info Banner">
                <button id="info-close-btn" style="position: absolute; top: 0; right: 0; background: none; border: none; padding: 0; margin: 0; cursor: pointer; width: 45px; height: 41px;">
                    <img id="info-close-img" src="img/Close-Btn.png" alt="Close" style="display: block;">
                </button>
            </div>
        </div>
    </div>

    <div id="loader-overlay">
        <img id="loader-bg" src="img/LoadingBG.png" alt="Loading" />
        <div id="progress-container">
            <img id="progress-bg" src="img/ProgressBG.png" alt="Progress BG" />
            <div id="progress-bar-wrapper">
                <img id="progress-bar" src="img/ProgressBar.png" alt="Progress Bar" />
            </div>
            <div id="loader-text">Loading ... 0%</div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
    <script src="wordlist.js" type="text/javascript"></script>
    <script src="js/core/SoundsManager.js" type="text/javascript"></script>
    <script src="main.js" type="text/javascript"></script>
    <script src="module1.js" type="text/javascript"></script>
    <script src="module2.js" type="text/javascript"></script>
    <script src="module3.js" type="text/javascript"></script>
    <script src="module4.js" type="text/javascript"></script>
    <script>
        (function() {
            var closeBtn = document.getElementById('info-close-btn');
            var closeImg = document.getElementById('info-close-img');
            if (closeBtn && closeImg) {
                closeBtn.addEventListener('mouseenter', function() {
                    closeImg.src = 'img/Close-Hover.png';
                });
                closeBtn.addEventListener('mouseleave', function() {
                    closeImg.src = 'img/Close-Btn.png';
                });
                closeBtn.addEventListener('click', function() {
                    if (typeof setScreen === 'function') {
                        setScreen('title');
                    }
                });
            }
        })();
    </script>
    <script>
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
        });
    </script>
</body>

</html>